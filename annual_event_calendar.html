<main>
	<section id="events-section">
		<div class="filters">
			<label for="month-filter">Выбрать месяц:</label>
			<select id="month-filter">
				<option value="all">Все месяцы</option>
				<option value="январь">Январь</option>
				<option value="февраль">Февраль</option>
				<option value="март">Март</option>
				<option value="апрель">Апрель</option>
				<option value="май">Май</option>
				<option value="июнь">Июнь</option>
				<option value="июль">Июль</option>
				<option value="август">Август</option>
				<option value="сентябрь">Сентябрь</option>
				<option value="октябрь">Октябрь</option>
				<option value="ноябрь">Ноябрь</option>
				<option value="декабрь">Декабрь</option>
			</select>
		</div>

		<div class="events-list">
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
	<div class="event-card" data-event-month="ноябрь">
        <div class="event-image">
            <img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/107a793b-e828-406a-ac27-daa8679b2978/macys_thanksgiving_day_parad.png?content-type=image%2Fpng" alt="Парад Дня Благодарения Macy's" />
        </div>
        <div class="event-details">
            <p class="event-title"><strong>Парад Дня Благодарения Macy's</strong></p>
            <p class="event-date-for-script" style="display: none;">28.11.2024</p>
            <p class="event-date"><img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/cf116991-f72b-40f5-921a-f08b2a92ad54/%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_2023-12-23_152229658.png?content-type=image%2Fpng" alt="Дата">28 Ноября 2024</p>
            <p class="event-time">
                <img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/701ffa65-894d-43c7-995e-591e45fad96f/clock.png?content-type=image%2Fpng" alt="Время">08:30
            </p>
            <p class="event-location">
                <img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/09e6ecac-3c82-4753-9969-b76daa3959a1/location.png?content-type=image%2Fpng" alt="Место">
                <a href="https://www.google.com/maps/d/u/0/viewer?mid=1bf4qwgGAMWSKS2N2GnGJRONqRTs&hl=en_US&ll=40.7291551%2C-73.95914669999999&z=18" target="_blank">77 West St, Brooklyn, NY 11222, USA</a>
            </p>
            <p class="event-description">Macy's Парад Дня Благодарения - это ежегодное мероприятие, проходящее в Нью-Йорке с 1924 года. Парад включает в себя шествие с участием огромных воздушных шаров в форме персонажей, плавучих платформ, музыкальных коллективов и различных культурных представлений.</p>
            <a href="https://www.macys.com/s/parade/" class="event-link">Подробнее</a>
        </div>
    </div>
----------------------------------------------
	<div class="event-card" data-event-month="июнь">
        <div class="event-image">
            <img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/351c4ff4-aa69-446c-b58a-6cd4b4fcae37/pride_parade.png?content-type=image%2Fpng" alt="Прайд парад в Нью-Йорке" />
        </div>
        <div class="event-details">
            <p class="event-title"><strong>Прайд парад в Нью-Йорке</strong></p>
            <p class="event-date-for-script" style="display: none;">30.06.2024</p>
            <p class="event-date"><img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/cf116991-f72b-40f5-921a-f08b2a92ad54/%D0%B8%D0%B7%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5_2023-12-23_152229658.png?content-type=image%2Fpng" alt="Дата">30 Июня 2024</p>
            <p class="event-time">
                <img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/701ffa65-894d-43c7-995e-591e45fad96f/clock.png?content-type=image%2Fpng" alt="Время">12:00
            </p>
            <p class="event-location">
                <img src="https://images.squarespace-cdn.com/content/563a5fb2e4b0710808c31f27/09e6ecac-3c82-4753-9969-b76daa3959a1/location.png?content-type=image%2Fpng" alt="Место">
                <a href="https://www.google.com/maps/d/u/0/viewer?mid=1bf4qwgGAMWSKS2N2GnGJRONqRTs&hl=en_US&ll=40.74284140000004%2C-73.98867229999999&z=18" target="_blank">25th Street and 5th Ave New York, NY 10010</a>
            </p>
            <p class="event-description">Гей-парад в Нью-Йорке - это ежегодное событие, отмечающее культуру и гордость ЛГБТК(А+)-сообщества. Марш проходит в Нью-Йорке и является одним из наиболее известных событий Нью-Йоркского Прайда.</p>
            <a href="https://www.nycpride.org/" class="event-link">Подробнее</a>
        </div>
    </div>
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
			<!-- ------------------------------------------------------------------------------------------ -->
		</div>
	</section>
</main>
<script>
	document.addEventListener('DOMContentLoaded', function () {
	var monthFilter = document.getElementById('month-filter');
	var eventsList = document.querySelector('.events-list');

	function getCurrentMonth() {
	  var options = { month: 'long', timeZone: 'America/New_York' };
	  var dateTimeFormat = new Intl.DateTimeFormat('ru-RU', options);
	  var [{ value: currentMonth }] = dateTimeFormat.formatToParts(new Date());
	  return currentMonth;
	}

	function hidePastEvents() {
	  var now = new Date(new Date().toLocaleString('en-US', { timeZone: 'America/New_York' }));
	  var eventCards = Array.from(eventsList.querySelectorAll('.event-card'));

	  eventCards.forEach(function (eventCard) {
	    var dateForScript = eventCard.querySelector('.event-date-for-script').textContent;
	    var dateParts = dateForScript.split('.');
	    var day = parseInt(dateParts[0], 10);
	    var month = parseInt(dateParts[1], 10) - 1;
	    var year = parseInt(dateParts[2], 10);
	    var eventDate = new Date(year, month, day);

	    var currentYear = now.getFullYear();
	    var currentMonth = now.getMonth();
	    var currentDay = now.getDate();
	    var currentDate = new Date(currentYear, currentMonth, currentDay);

	    if (eventDate < currentDate) {
	      eventCard.style.display = 'none';
	    }
	  });
	}

	function sortEventCards() {
	  var eventCards = Array.from(eventsList.querySelectorAll('.event-card'));

	  eventCards.sort(function (a, b) {
	    var dateA = a.querySelector('.event-date-for-script').textContent;
	    var dateB = b.querySelector('.event-date-for-script').textContent;

	    var datePartsA = dateA.split('.');
	    var datePartsB = dateB.split('.');
	    var dateObjA = new Date(datePartsA[2], datePartsA[1] - 1, datePartsA[0]);
	    var dateObjB = new Date(datePartsB[2], datePartsB[1] - 1, datePartsB[0]);
	    return dateObjA - dateObjB;
	  });

	  eventCards.forEach(function (eventCard) {
	    eventsList.appendChild(eventCard);
	  });
	}

	function filterEvents() {
	  var eventCards = Array.from(eventsList.querySelectorAll('.event-card'));

	  eventCards.forEach(function (eventCard) {
	    eventCard.style.display = 'block';
	  });

	  sortEventCards();

	  var selectedMonth = monthFilter.value;

	  if (selectedMonth !== 'all') {
	    eventCards.forEach(function (eventCard) {
	      var dataMonth = eventCard.getAttribute('data-event-month');

	      if (selectedMonth !== dataMonth) {
	        eventCard.style.display = 'none';
	      }
	    });
	  }
	  hidePastEvents();
	}

	sortEventCards();

	monthFilter.value = getCurrentMonth();
	filterEvents();

	monthFilter.addEventListener('change', filterEvents);
	});
</script>
